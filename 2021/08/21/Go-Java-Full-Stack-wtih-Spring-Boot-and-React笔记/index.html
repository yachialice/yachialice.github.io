<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="Go Java Full Stack wtih Spring Boot and React笔记"><meta name="keywords" content="Projects"><meta name="author" content="Yachialice"><meta name="copyright" content="Yachialice"><title>Go Java Full Stack wtih Spring Boot and React笔记 | Yachialice</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.9.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.9.0"><meta name="format-detection" content="telephone=no"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"We didn't find any results for the search: ${query}"}},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  hexoVersion: '5.4.0'
} </script><meta name="generator" content="Hexo 5.4.0"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar" data-display="true"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Go-Java-Full-Stack-wtih-Spring-Boot-and-React%E7%AC%94%E8%AE%B0"><span class="toc-number">1.</span> <span class="toc-text">Go Java Full Stack wtih Spring Boot and React笔记</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Appendix%E2%80%93Spring-Boot"><span class="toc-number">1.0.1.</span> <span class="toc-text">Appendix–Spring Boot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Appendix%E2%80%93JPA-with-H2-in-memory-database"><span class="toc-number">1.0.2.</span> <span class="toc-text">Appendix–JPA with H2 in-memory database</span></a></li></ol></li></ol></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="https://i.loli.net/2021/03/06/lfBCnzNsjHxPIXw.jpg"></div><div class="author-info__name text-center">Yachialice</div><div class="author-info__description text-center">Yachialice's Blog</div><div class="follow-button"><a target="_blank" rel="noopener" href="https://github.com/yachialice">Follow Me</a></div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">174</span></a><a class="author-info-articles__tags article-meta" href="/tags"><span class="pull-left">Tags</span><span class="pull-right">8</span></a><a class="author-info-articles__categories article-meta" href="/categories"><span class="pull-left">Categories</span><span class="pull-right">40</span></a></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://tva1.sinaimg.cn/large/008eGmZEgy1goa52nmaxvj31400u07dr.jpg)"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">Yachialice</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus">   <a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a><a class="site-page" href="/about">About</a></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search"></i><span> Search</span></a></span></div><div id="post-info"><div id="post-title">Go Java Full Stack wtih Spring Boot and React笔记</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2021-08-21</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><h1 id="Go-Java-Full-Stack-wtih-Spring-Boot-and-React笔记"><a href="#Go-Java-Full-Stack-wtih-Spring-Boot-and-React笔记" class="headerlink" title="Go Java Full Stack wtih Spring Boot and React笔记"></a>Go Java Full Stack wtih Spring Boot and React笔记</h1><p>1、BabelJs</p>
<p>（1）将高版本的javascript转换成低版本的javascript，从而兼容各个浏览器</p>
<p>（2）将JSX转化成js代码</p>
<p>（3）JSX只能return一个element    </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--错误--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h2</span>&gt;</span>yyy<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--正确--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>yyy<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--正确--&gt;</span></span><br><span class="line"><span class="tag">&lt;&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h1</span>&gt;</span>xxx<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">h2</span>&gt;</span>yyy<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/&gt;</span></span><br></pre></td></tr></table></figure>

<p>（4）All the nodes should be properly closed</p>
<p>（5）JSX的component必须以大写字母开头，例如：FirstComponent。firtComponent是错误的！！因为html中标签都以小写字母开头，为了便于区分</p>
<p>（6）要用JSX，必须import React</p>
<p>2、React的state管理机制</p>
<p>（1）不能直接改变state</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">increment</span>(<span class="params"></span>)</span>&#123;<span class="comment">//Update state - counter++</span></span><br><span class="line">    <span class="comment">//this.state.counter++; //Bad Practice</span></span><br><span class="line">    <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">        counter: <span class="built_in">this</span>.state.counter + <span class="number">1</span> <span class="comment">//Good Practice</span></span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>（2）React在内存中保存着virtual dom，因为在内存中，所以对virtual dom做修改很简单。每次状态改变，先检查virtual dom1和virtual dom2的区别，再将有差别的部分在dom上进行修改。</p>
<p>3、可以使用arrow function来代替binding</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123;Component&#125; <span class="keyword">from</span> <span class="string">&#x27;react&#x27;</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./Counter.css&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Counter</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//Define the initial state in a constructor</span></span><br><span class="line">    <span class="comment">//state =&gt; counter 0</span></span><br><span class="line">    <span class="comment">//构造函数</span></span><br><span class="line">    <span class="function"><span class="title">constructor</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="built_in">super</span>(); <span class="comment">//call the super method</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">this</span>.state = &#123;</span><br><span class="line">            counter : <span class="number">0</span>,</span><br><span class="line">            secondCounter : <span class="number">100</span></span><br><span class="line">        &#125;</span><br><span class="line">                <span class="comment">//写arrow function，就不用写这句</span></span><br><span class="line">        <span class="built_in">this</span>.increment = <span class="built_in">this</span>.increment.bind(<span class="built_in">this</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//render = () =&gt;&#123;</span></span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">        &lt;div className = <span class="string">&quot;counter&quot;</span>&gt;</span><br><span class="line">            &lt;button onClick=&#123;<span class="built_in">this</span>.increment&#125;&gt;+<span class="number">1</span>&lt;/button&gt;</span><br><span class="line">            &lt;span className = <span class="string">&quot;count&quot;</span>&gt;&#123;<span class="built_in">this</span>.state.counter&#125;&lt;/span&gt;</span><br><span class="line">            &lt;span className = <span class="string">&quot;count&quot;</span>&gt;&#123;<span class="built_in">this</span>.state.secondCounter&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="comment">//increment = () =&gt; &#123;//Update state - counter++</span></span><br><span class="line">        <span class="comment">//this.state.counter++; //Bad Practice</span></span><br><span class="line">        <span class="built_in">this</span>.setState(&#123;</span><br><span class="line">            counter: <span class="built_in">this</span>.state.counter + <span class="number">1</span>,</span><br><span class="line">            secondCounter: <span class="built_in">this</span>.state.secondCounter + <span class="number">1</span></span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Counter</span><br></pre></td></tr></table></figure>



<p>4、props</p>
<p>使用示例:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//添加props</span></span><br><span class="line">&lt;Counter by=&#123;1&#125;&gt;&lt;/Counter&gt;</span><br><span class="line"><span class="comment">//使用props</span></span><br><span class="line">&lt;button onClick=&#123;this.increment&#125;&gt;+&#123;this.props.by&#125;&lt;/button&gt;</span><br><span class="line"><span class="comment">//Counter class外定义default props，这样&lt;Counter&gt;中不定义by的时候，就用默认的by</span></span><br><span class="line">Counter.defaultProps = &#123;</span><br><span class="line">    by : <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Counter.propTypes = &#123;</span><br><span class="line">    by : PropTypes.number</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>5、Arrow Function的使用</p>
<p>（1）可以和prevState配合使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//普通写法</span></span><br><span class="line"><span class="function"><span class="title">decrement</span>(<span class="params">by</span>)</span>&#123;</span><br><span class="line">  <span class="built_in">this</span>.setState(</span><br><span class="line">  	&#123;<span class="attr">counter</span>: <span class="built_in">this</span>.state.counter - by&#125;</span><br><span class="line">  )</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//Arrow Function + prevState    </span></span><br><span class="line"><span class="function"><span class="title">decrement</span>(<span class="params">by</span>)</span>&#123;</span><br><span class="line">        <span class="built_in">this</span>.setState(</span><br><span class="line">            (prevState) =&gt; &#123;</span><br><span class="line">                <span class="keyword">return</span>&#123;<span class="attr">counter</span>: prevState.counter - by&#125;</span><br><span class="line">            &#125;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>（2）可以用于onClick定义含参数的函数</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//错误，使用incrementMethod()，加上()，则表示调用了函数，会报错</span></span><br><span class="line">&lt;button onClick=&#123;<span class="built_in">this</span>.props.incrementMethod(<span class="built_in">this</span>.props.by)&#125;&gt;+&#123;<span class="built_in">this</span>.props.by&#125;&lt;/button&gt;</span><br><span class="line"><span class="comment">//正确，定义一个arrow function</span></span><br><span class="line">&lt;button onClick=&#123;<span class="function">() =&gt;</span> &#123;<span class="built_in">this</span>.props.incrementMethod(<span class="built_in">this</span>.props.by)&gt;+&#123;<span class="built_in">this</span>.props.by&#125;&lt;/button&gt;</span><br></pre></td></tr></table></figure>



<p>6、React Router history api用于界面跳转</p>
<p>（1）安装</p>
<p>npm add react-router-dom</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;BrowserRouter <span class="keyword">as</span> Router, Route&#125; <span class="keyword">from</span> <span class="string">&#x27;react-router-dom&#x27;</span></span><br></pre></td></tr></table></figure>

<p>（2）使用</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoApp</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">render</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;Router&gt;</span><br><span class="line">                    &lt;&gt;</span><br><span class="line">                        &lt;Route path=<span class="string">&quot;/&quot;</span> exact component=&#123;LoginComponent&#125;/&gt;</span><br><span class="line">                        &lt;Route path=<span class="string">&quot;/login&quot;</span> component=&#123;LoginComponent&#125;/&gt;</span><br><span class="line">                        &lt;Route path=<span class="string">&quot;/welcome&quot;</span> component=&#123;WelcomeComponent&#125;/&gt;</span><br><span class="line">                    &lt;/&gt;</span><br><span class="line">                &lt;/Router&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">this</span>.props.history.push(<span class="string">&quot;/welcome&quot;</span>)</span><br></pre></td></tr></table></figure>



<p>7、Bootstrap</p>
<p>可以与手机很好地兼容。</p>
<p>8、login &amp; logout</p>
<p>（1）使用session storage（比Local Storage优越的地方在于，浏览器推出后，key和value也会被清空）。</p>
<p>（2）在检查-&gt;application-&gt;seesion storage中可以看到当前的key和value。</p>
<p>（3）logn和logout机制思路：</p>
<p>​        login-&gt;将key放入session storage</p>
<p>​        logout-&gt;将key移除</p>
<p>9、header不会自动刷新问题</p>
<p>使用withRouter</p>
<p>10、Web Services</p>
<p>Request and Respond语言：XML、JSON</p>
<p>Service Consumer：Client（App）</p>
<p>Service Provider（Server）</p>
<p>Service definition（Contract between Provider &amp; Consumer）：（1）Request/Response Format （2）Request Structure （3）Response Structure  （4）Endpoint</p>
<p>Transport：HTTP、MQ</p>
<p>11、REST（Representational State Transfer）</p>
<p>基于HTTP，利用HTTP定义的东西（Get，Put，Post…），来构造web service。核心概念是将东西都视为资源。</p>
<p>12、写REST的Request和Respond</p>
<p>@RestController，定义Controller</p>
<p>@GetMapping，@RequestMapping，与Request方式mapping</p>
<p>12、axios</p>
<p>详情见：<a target="_blank" rel="noopener" href="https://github.com/axios/axios">https://github.com/axios/axios</a></p>
<p>HTTP Client</p>
<p>Promise——asynchronous framework（请求发出，浏览器继续工作，请求回应再更新界面，而不是一直等待回应）</p>
<p>例：</p>
<p>前端页面：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloWorldService</span></span>&#123;</span><br><span class="line">    <span class="function"><span class="title">executeHelloWorldService</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="comment">//axios.get()返回一个promise。可以利用axios.get().then().catch()方式处理返回结果</span></span><br><span class="line">        <span class="keyword">return</span> axios.get(<span class="string">&#x27;http://localhost:8080/hello-world&#x27;</span>);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">&#x27;executed HelloWorldService&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">axios.get(<span class="string">&#x27;/user?ID=12345&#x27;</span>)</span><br><span class="line">	.then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//handle success</span></span><br><span class="line">  	<span class="built_in">console</span>.log(response);</span><br><span class="line">&#125;)</span><br><span class="line">	.catch(<span class="function"><span class="keyword">function</span>(<span class="params">error</span>)</span>&#123;</span><br><span class="line">  <span class="comment">//handle error</span></span><br><span class="line">  	<span class="built_in">console</span>.log(error);</span><br><span class="line">&#125;)</span><br><span class="line">	.then(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="comment">//always executed</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<p>13、后端允许来自一些origins的请求</p>
<p>例如：以下语句即位允许来自前端界面<a target="_blank" rel="noopener" href="http://localhost:3000/welcome/alice%E7%9A%84%E8%AF%B7%E6%B1%82">http://localhost:3000/welcome/alice的请求</a></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@CrossOrigin(origins=&quot;http://localhost:3000/welcome/alice&quot;)</span></span><br></pre></td></tr></table></figure>



<p>14、管理用户的个人todos</p>
<p>Retrieve all Todos for A User</p>
<p>GET /users/{user_name}/todos</p>
<p>Delete a Todo of a User</p>
<p>DELETE /users/{user_name}/todos/{todo_id}</p>
<p>Edit/Update a Tdo</p>
<p>PUT /users/{user_name}/todos/{todo_id}</p>
<p>Create a new Todo</p>
<p>POST /user/{user_name}/todos/</p>
<p>15、页面渲染顺序</p>
<p>constructor-&gt;ComponentUpdate()-&gt;render()-&gt;componentDidMount()-&gt;某个component is unmounted，调用componentWillUnmount()</p>
<p>因此，一般不在constructor中从后端拉取数据初始化state，否则第一次render()前需要等待很久。在componentDidMount()中从后端拉取数据出实话数据。</p>
<p>shouldComponentUpdate()：在render()前调用。控制当前prop和state的更改是否被render。若shouldComponentUpdate()函数return false，则state不会被render；return true，则被render。</p>
<p>16、利用formik和moment建立表格</p>
<p>npm add formik</p>
<p>npm add moment</p>
<p>initialValues设置表中的初始值，onSubmit方法获取表格提交的value</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;Formik</span><br><span class="line">  initialValues=&#123;&#123;description, targetDate&#125;&#125;</span><br><span class="line">  onSubmit=&#123;<span class="built_in">this</span>.onSubmit&#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>



<p>16、安全问题</p>
<p>需要在request中附加username和password才能获取信息。</p>
<p>使用JWT（JSON Web Token）。</p>
<p>使用dependencies：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-security<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>在resource-&gt;application.properties中设置指定用户名和密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">spring.security.user.name&#x3D;alice</span><br><span class="line">spring.security.user.password&#x3D;dummy</span><br></pre></td></tr></table></figure>





<p>17、解决问题：Access to XMLHttpRequest at ‘URL’ from origin ‘<a href="http://localhost:4200&#39;">http://localhost:4200&#39;</a> has been blocked by CORS policy</p>
<p>参考网址（Debugging Guide）：<a target="_blank" rel="noopener" href="https://github.com/in28minutes/in28minutes-initiatives/blob/master/The-in28Minutes-TroubleshootingGuide-And-FAQ/fullstack.md#basic-authentication-problems">https://github.com/in28minutes/in28minutes-initiatives/blob/master/The-in28Minutes-TroubleshootingGuide-And-FAQ/fullstack.md#basic-authentication-problems</a></p>
<p>18、CSRF问题</p>
<p>Override WebSecurityConfigurerAdapter.class中的configure(HttpSecurity http)，并给每个request加上一个header。</p>
<p>可以使用interceptors，拦截每个request，为每个request增加一个header。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">setupAxiosInterceptors</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> username = <span class="string">&#x27;alice&#x27;</span></span><br><span class="line">    <span class="keyword">let</span> password = <span class="string">&#x27;dummy&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">let</span> basicAuthHeader = <span class="string">&#x27;Basic &#x27;</span> +  <span class="built_in">window</span>.btoa(username + <span class="string">&quot;:&quot;</span> + password)</span><br><span class="line">    axios.interceptors.request.use(</span><br><span class="line">        (config) =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">this</span>.isUserLoggedIn()) &#123;</span><br><span class="line">                config.headers.authorization = basicAuthHeader</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> config</span><br><span class="line">        &#125;</span><br><span class="line">    )</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>19、JWT（Json Web Token，Jott）</p>
<p>（1）Basic Authentication</p>
<p>send a basic 64 encoded username and password</p>
<p>no expiration time</p>
<p>no user details except username &amp; password</p>
<p>（2）Custom Token System</p>
<p>cotain user details</p>
<p>custom structure</p>
<p> possible security flaws</p>
<p>（3）JWT（参见：<a target="_blank" rel="noopener" href="https://jwt.io/">https://jwt.io</a>)</p>
<p>Standard</p>
<p>contain user details and authorization</p>
<p>(a) POST <a target="_blank" rel="noopener" href="http://localhost:8080/authenticate">http://localhost:8080/authenticate</a></p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;username&quot;</span>: <span class="string">&quot;alice&quot;</span>,</span><br><span class="line">  <span class="attr">&quot;password&quot;</span>: <span class="string">&quot;dummy&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>得到token</p>
<p>（b）GET <a target="_blank" rel="noopener" href="http://localhost:8080/users/alice/todos">http://localhost:8080/users/alice/todos</a></p>
<p>Add header-&gt;Authorization-&gt;Bearer token</p>
<p>header中加入token，可以顺利GET</p>
<p>![image-20210906193445247](/Users/alice/Library/Application Support/typora-user-images/image-20210906193445247.png)</p>
<p>JWT梳理</p>
<p>（1）得到token</p>
<p>![image-20210906193652508](/Users/alice/Library/Application Support/typora-user-images/image-20210906193652508.png)</p>
<p>（2）refresh token</p>
<p>![image-20210906193715913](/Users/alice/Library/Application Support/typora-user-images/image-20210906193715913.png)</p>
<p>（3）Request（需要加上Bearer token）</p>
<p>![image-20210906193835215](/Users/alice/Library/Application Support/typora-user-images/image-20210906193835215.png)</p>
<p>​    Filter用来check当前用户是否valid</p>
<p>（4）JwtTokenUtil.java帮助我们使用token（查看token expire date等等）</p>
<p>（5）User Details</p>
<p>![image-20210906194902129](/Users/alice/Library/Application Support/typora-user-images/image-20210906194902129.png)</p>
<p>JwtInMemonryUserDetailsService.java中，添加username和password</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//password需要先编码  </span></span><br><span class="line"><span class="keyword">static</span> &#123;</span><br><span class="line">    inMemoryUserList.add(<span class="keyword">new</span> JwtUserDetails(<span class="number">1L</span>, <span class="string">&quot;alice&quot;</span>,</span><br><span class="line">        <span class="string">&quot;$2a$10$3zHzb.Npv1hfZbLEU5qsdOju/tk2je6W6PnNnY.c1ujWPcZh4PL6e&quot;</span>, <span class="string">&quot;ROLE_USER_2&quot;</span>));</span><br><span class="line">    inMemoryUserList.add(<span class="keyword">new</span> JwtUserDetails(<span class="number">2L</span>, <span class="string">&quot;linda&quot;</span>, <span class="string">&quot;$2a$10$kooDMzheSGQ35cXXNcKu/.CnA54Srl7tjq4LRsOmij3T2xLfqKTHa&quot;</span>, <span class="string">&quot;ROLE_USER_2&quot;</span>));</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<p>（6）整合</p>
<p>![image-20210906195040936](/Users/alice/Library/Application Support/typora-user-images/image-20210906195040936.png)</p>
<p><b>JWT Authentication Debugging Reference: <a target="_blank" rel="noopener" href="https://github.com/in28minutes/in28minutes-initiatives/blob/master/The-in28Minutes-TroubleshootingGuide-And-FAQ/fullstack.md#jwt-authentication-problems">https://github.com/in28minutes/in28minutes-initiatives/blob/master/The-in28Minutes-TroubleshootingGuide-And-FAQ/fullstack.md#jwt-authentication-problems</a></b></p>
<h3 id="Appendix–Spring-Boot"><a href="#Appendix–Spring-Boot" class="headerlink" title="Appendix–Spring Boot"></a>Appendix–Spring Boot</h3><p>1、About Spring Boot</p>
<p>Goals of Spring Boot：</p>
<p>（1）Enable building production ready applications quickly</p>
<p>（2）Provide common non-functional features</p>
<p>eg：embedded servers；metrics；health checks；externalized configuration</p>
<p>What Spring Boot is NOT</p>
<p>（1）Zero code generation</p>
<p>（2）Neither an application server nor a web server</p>
<p>Features</p>
<p>（1）Quicker Starter Projects （可以快速用很多框架搭建项目，比如Spring MVC、JPA）</p>
<p>（2）Embedded Servers - Tomcat, Jetty or Udertow（可以package server在jar中，直接在代码中include，不用安装服务器）</p>
<p>（3）Production-ready features</p>
<p>mertrics and health check</p>
<p>externalized configuration</p>
<p>在Spring Boot之前，建立web application等需要设置许多configuration，设置各种包的版本，非常麻烦。</p>
<p>2、SpringBootApplication</p>
<p>作用（1）indicates Spring context file</p>
<p>​        （2）Auto configuration</p>
<p>​        （3）Component Scan：scan classes in the package</p>
<p>3、Spring Boot VS Spring VS Spring MVC</p>
<p>Dependency Injection-&gt;Easily unit tested</p>
<p>DispatcherServlet</p>
<p>Spring MVC: Develop Web Application。如果用Spring Boot开发REST Sevices，内在也在使用Spring MVC框架。</p>
<p>4、Spring Boot Starter Web &amp; Spring Boot Starter JPA</p>
<p>5、各种Spring Boot Starter Projects的功能</p>
<p>![image-20210907190459483](/Users/alice/Library/Application Support/typora-user-images/image-20210907190459483.png)</p>
<p>6、一些概念</p>
<p><b>Servlet</b></p>
<p>​        静态页面是指内容完全写在html中，不需要从服务器中获取数据显示到界面上的页面。对于静态页面来说，收到请求后，服务器只要根据URL，找到对应的html文件response即可。但对于动态页面来说，服务器需要结合数据库中的内容进行处理，生成HTML代码，之后再response。</p>
<p>Servlet即是在服务器上运行的小程序，主要功能是用于交互式地浏览和修改数据，生成动态Web内容。</p>
<p>![image-20210907191612557](/Users/alice/Library/Application Support/typora-user-images/image-20210907191612557.png)</p>
<p><b>DispatcherServlet</b></p>
<p>​        SpringMVC的核心即为DispatcherServlet，实质上是一个HttpServlet，负责将所有请求分发。</p>
<p>![image-20210907192131803](/Users/alice/Library/Application Support/typora-user-images/image-20210907192131803.png)</p>
<p><b>Spring Boot Actuator</b></p>
<p>用于监控和管理Spring Boot应用，健康检查、审计、统计和HTTP追踪等。</p>
<p>7、Spring Boot Dev tools</p>
<p>依赖中添加spring-boot-devtools，当代码更新后，可以自动更新界面</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.springframework.boot<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>spring-boot-starter-test<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">scope</span>&gt;</span>test<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h3 id="Appendix–JPA-with-H2-in-memory-database"><a href="#Appendix–JPA-with-H2-in-memory-database" class="headerlink" title="Appendix–JPA with H2 in-memory database"></a>Appendix–JPA with H2 in-memory database</h3><p>Impedence Mismatch</p>
<p>类的设计（Employer，Employee等）和table的设计之间有gap，为了弥补这种gap，诞生了JPA，JDBC，Spring JDBC，myBatis等。</p>
<p>myBatis：map objects to queries</p>
<p>JDBC和myBatis还是要deal with queries，当queries很大时，修改的时候需要对数据库非常熟悉，JPA解决了这个问题。</p>
<p><b>H2 Console</b></p>
<p>![image-20210908101846334](/Users/alice/Library/Application Support/typora-user-images/image-20210908101846334.png)</p>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">Yachialice</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://example.com/2021/08/21/Go-Java-Full-Stack-wtih-Spring-Boot-and-React笔记/">http://example.com/2021/08/21/Go-Java-Full-Stack-wtih-Spring-Boot-and-React笔记/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Projects/">Projects</a></div><nav id="pagination"><div class="prev-post pull-left"><a href="/2021/08/21/LeetCode-953-Verifying-an-Alien-Dictionary/"><i class="fa fa-chevron-left">  </i><span>LeetCode-953. Verifying an Alien Dictionary</span></a></div><div class="next-post pull-right"><a href="/2021/08/21/C-%E5%88%B7%E9%A2%98%E5%B8%B8%E7%94%A8%E8%AF%AD%E6%B3%95/"><span>C++刷题常用语法</span><i class="fa fa-chevron-right"></i></a></div></nav></div></div><footer class="footer-bg" style="background-image: url(https://tva1.sinaimg.cn/large/008eGmZEgy1goa52nmaxvj31400u07dr.jpg)"><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2021 By Yachialice</div><div class="framework-info"><span>Driven - </span><a target="_blank" rel="noopener" href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a target="_blank" rel="noopener" href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.9.0"></script><script src="/js/fancybox.js?version=1.9.0"></script><script src="/js/sidebar.js?version=1.9.0"></script><script src="/js/copy.js?version=1.9.0"></script><script src="/js/fireworks.js?version=1.9.0"></script><script src="/js/transition.js?version=1.9.0"></script><script src="/js/scroll.js?version=1.9.0"></script><script src="/js/head.js?version=1.9.0"></script><script src="/js/search/local-search.js"></script><script>if(/Android|webOS|iPhone|iPod|iPad|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
  $('#top-container').addClass('is-mobile')
}</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">Local search</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="Search for Posts"></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>Powered by</span> <a target="_blank" rel="noopener" href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>